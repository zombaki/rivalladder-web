<mat-toolbar color="primary" class="navbar">
  <div class="navbar-container">
    <div class="navbar-left">
      <button mat-icon-button routerLink="/">
        <mat-icon>sports_tennis</mat-icon>
      </button>
      <span class="app-name" routerLink="/">RivalLadder</span>
    </div>

    <div class="navbar-right">
      <ng-container *ngIf="isAuthenticated$ | async; else notAuthenticated">
        <button mat-button routerLink="/dashboard" routerLinkActive="active">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </button>

        <button mat-button routerLink="/ladder" routerLinkActive="active">
          <mat-icon>leaderboard</mat-icon>
          <span>Ladder</span>
        </button>

        <button mat-button routerLink="/challenges" routerLinkActive="active">
          <mat-icon>sports</mat-icon>
          <span>Challenges</span>
        </button>

        <button mat-button routerLink="/matches" routerLinkActive="active">
          <mat-icon>scoreboard</mat-icon>
          <span>Matches</span>
        </button>

        <button mat-icon-button [matMenuTriggerFor]="userMenu">
          <img 
            [src]="(user$ | async)?.photoUrl || 'assets/default-avatar.png'" 
            alt="User avatar"
            class="user-avatar"
          />
        </button>

        <mat-menu #userMenu="matMenu">
          <button mat-menu-item routerLink="/profile">
            <mat-icon>person</mat-icon>
            <span>Profile</span>
          </button>
          <button mat-menu-item routerLink="/settings">
            <mat-icon>settings</mat-icon>
            <span>Settings</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </ng-container>

      <ng-template #notAuthenticated>
        <button mat-button routerLink="/auth/login">
          <mat-icon>login</mat-icon>
          <span>Login</span>
        </button>
        <button mat-raised-button color="accent" routerLink="/auth/register">
          Register
        </button>
      </ng-template>
    </div>
  </div>
</mat-toolbar>
